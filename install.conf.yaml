
- defaults:
    create: { mode: 0755 }
    link: { create: true, relink: true, relative: true, canonicalize: false }
    shell: { stdout: true, stderr: true }

- create: ['${XDG_CONFIG_HOME}', '${XDG_DATA_HOME}', '${XDG_BIN_HOME}']

- clean: ['~', '${XDG_CONFIG_HOME}', '${XDG_BIN_HOME}', '${XDG_DATA_HOME}/bash-completion/completions']

- link:
    ~/.dotfiles: { path: '', if: "[ ! -d ~/.dotfiles ]" }

    ~/.bash_profile:       .bash_profile
    ~/.bashrc:             .bashrc
    ~/.bash_logout:        .bash_logout

    ${XDG_CONFIG_HOME}/bat:         .config/bat
    ${XDG_CONFIG_HOME}/fastfetch:   .config/fastfetch
    ${XDG_CONFIG_HOME}/git:         .config/git
    ${XDG_CONFIG_HOME}/gitmux:      .config/gitmux
    ${XDG_CONFIG_HOME}/lazydocker/config.yml:
      path: .config/lazydocker/config.local.yml
      if: "[ -f .config/lazydocker/config.local.yml ]"
    ${XDG_CONFIG_HOME}/tmux:        .config/tmux
    ${XDG_CONFIG_HOME}/vim:         .config/vim

    ${XDG_BIN_HOME}/git-context-graph: lib/git-context-graph/git-context-graph
    ${XDG_BIN_HOME}/git-mr:            lib/git-mr/git-mr

    ${XDG_BIN_HOME}/git-aliases:       git-scripts/git-aliases
    ${XDG_BIN_HOME}/git-continue:      git-scripts/git-continue
    ${XDG_BIN_HOME}/git-fast-forward:  git-scripts/git-fast-forward
    ${XDG_BIN_HOME}/git-force-push:    git-scripts/git-force-push
    ${XDG_BIN_HOME}/git-is-clean:      git-scripts/git-is-clean
    ${XDG_BIN_HOME}/git-separator:     git-scripts/git-separator
    ${XDG_BIN_HOME}/git-update:        git-scripts/git-update

    ${XDG_BIN_HOME}/termcolors:        scripts/print256colours.sh

    ${XDG_DATA_HOME}/bash-completion/completions/git-context-graph.bash: lib/git-context-graph/git-context-graph-completion.bash
    ${XDG_DATA_HOME}/bash-completion/completions/git-mr.bash:            lib/git-mr/git-mr-completion.bash
    ${XDG_DATA_HOME}/bash-completion/completions/git-mu.bash:            git-scripts/git-mu-completion.bash

    # Windows desktop
    ~/AutoHotkey:      { path: .config/AutoHotkey,      if: '[ -f /git-bash.exe ]' }
    ~/Documents/Dygma: { path: .config/Dygma,           if: '[ -f /git-bash.exe ]' }
    ~/.minttyrc:       { path: .config/mintty/minttyrc, if: '[ -f /git-bash.exe ]' }

    # Linux desktop
    ${XDG_CONFIG_HOME}/autokey/data/: { path: .config/autokey/data/*, glob: true, if: "[ -d ${XDG_CONFIG_HOME}/autokey ]" }
    ${XDG_CONFIG_HOME}/xbindkeys:     { path: .config/xbindkeys,      if: "command -v xbindkeys" }
    ${XDG_CONFIG_HOME}/xmodmap:       { path: .config/xmodmap,        if: "command -v xmodmap" }

    # Mac desktop
    ${XDG_CONFIG_HOME}/karabiner/assets/complex_modifications/:
      path: .config/karabiner/assets/complex_modifications/*
      glob: true
      if: "[ -d ${XDG_CONFIG_HOME}/karabiner ]"

- shell:
    - [ bash ~/.dotfiles/scripts/install-local.sh,   Initializing local files ]
    - [ bash ~/.dotfiles/scripts/install-devices.sh, Configuring devices ]
